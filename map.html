<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Карта Ангара</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    body {
      background: black;
      color: #0f0;
      font-family: monospace;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(0deg,
          rgba(0, 255, 0, 0.05),
          rgba(0, 255, 0, 0.05) 1px,
          transparent 1px,
          transparent 2px);
      pointer-events: none;
      z-index: 9999;
      animation: scanlines 2s linear infinite;
    }

    @keyframes scanlines {
      0% {
        background-position: 0 0;
      }

      100% {
        background-position: 0 2px;
      }
    }

    header {
      text-align: center;
      border-bottom: 1px dashed #0f0;
      padding: 1rem;
    }
  </style>
</head>

<body>
  <div class="scanlines"></div>
  <div class="stars"></div>
  <div class="container">
    <header>
      <div class="logo">
        <div class="eye">
          <div class="antenna a1"></div>
          <div class="antenna a2"></div>
          <div class="antenna a3"></div>
          <div class="pupil"></div>
        </div>
        <h1>ФОНД АСТРОЛЕГГИ</h1>
      </div>
      <p class="classified">[ КЛАССИФИКАЦИЯ: ОГРАНИЧЕННЫЙ ДОСТУП // УРОВЕНЬ ДОПУСКА: Θ ]</p>
    </header>
  </div>

  <div class="map-wrapper" id="mapWrapper">
    <div class="map-container" id="mapContainer">
      <div class="hangar">
        <div class="zone" style="top: 50px; left: 60px; width: 120px; height: 100px;"
          data-info="Узел связи: зафиксированы аномальные шумы.">Узел связи</div>
        <div class="zone" style="top: 200px; left: 150px; width: 100px; height: 80px;"
          data-info="Пункт наблюдения: искажённые изображения.">Наблюдение</div>
        <div class="zone" style="top: 350px; left: 80px; width: 130px; height: 70px;"
          data-info="Архив: заражённые документы.">Архив</div>
        <div class="zone" style="top: 150px; left: 300px; width: 150px; height: 150px;"
          data-info="Центр: вмешательство не исключено.">Центр</div>
      </div>
    </div>
  </div>

  <div class="info-box" id="infoBox"></div>

  <script>
    window.addEventListener("DOMContentLoaded", () => {
      const wrapper = document.getElementById("mapWrapper");
      const map = document.getElementById("mapContainer");
      const infoBox = document.getElementById("infoBox");
      const zones = document.querySelectorAll(".zone");

      if (!wrapper || !map || !infoBox) return;

      let isDragging = false;
      let startX, startY;
      let currentX = 0, currentY = 0;
      let hideInfoTimeout;

      const centerMap = () => {
        const wrapperRect = wrapper.getBoundingClientRect();
        const mapRect = map.getBoundingClientRect();
        currentX = (wrapperRect.width - mapRect.width) / 2;
        currentY = (wrapperRect.height - mapRect.height) / 2;
        map.style.transform = `translate(${currentX}px, ${currentY}px)`;
      };

      window.addEventListener("load", centerMap);

      wrapper.addEventListener("mousedown", (e) => {
        isDragging = true;
        startX = e.clientX - currentX;
        startY = e.clientY - currentY;
        wrapper.style.cursor = "grabbing";
      });

      wrapper.addEventListener("mouseup", () => {
        isDragging = false;
        wrapper.style.cursor = "grab";
      });

      wrapper.addEventListener("mouseleave", () => {
        isDragging = false;
        wrapper.style.cursor = "grab";
      });

      wrapper.addEventListener("mousemove", (e) => {
        if (!isDragging) return;
        currentX = e.clientX - startX;
        currentY = e.clientY - startY;
        map.style.transform = `translate(${currentX}px, ${currentY}px)`;
      });

      zones.forEach(zone => {
        zone.addEventListener("click", () => {
          const text = zone.getAttribute("data-info");
          infoBox.classList.add("show");
          infoBox.textContent = text;

          clearTimeout(hideInfoTimeout);
          hideInfoTimeout = setTimeout(() => {
            infoBox.classList.remove("show");
          }, 4000);
        });
      });

      document.addEventListener("click", (e) => {
        if (!e.target.closest(".zone") && !e.target.closest("#infoBox")) {
          infoBox.classList.remove("show");
        }
      });
    });
  </script>
</body>

</html>